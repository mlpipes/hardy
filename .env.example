# Hardy Auth Service Environment Configuration
# Copy this file to .env.local and fill in your values

# =============================================================================
# CORE CONFIGURATION
# =============================================================================

# Database Configuration (Dedicated PostgreSQL Instance)
DATABASE_URL="postgresql://auth_service:auth_password@localhost:5434/hardy_auth?sslmode=prefer"

# Better Auth Configuration
BETTER_AUTH_SECRET="your-32-character-secret-key-change-in-production"
BETTER_AUTH_URL="http://localhost:3001"

# Application Environment
NODE_ENV="development"
NEXTAUTH_URL="http://localhost:3001"

# =============================================================================
# EMAIL SERVICE CONFIGURATION
# =============================================================================

# AWS SES Configuration (Primary)
AWS_ACCESS_KEY_ID="your-aws-access-key-id"
AWS_SECRET_ACCESS_KEY="your-aws-secret-access-key"
AWS_SES_REGION="us-east-1"
AWS_SES_FROM_EMAIL="noreply@your-domain.com"
NEXT_PUBLIC_APP_URL="http://localhost:3001"

# SMTP Configuration (Fallback) - Configure with your preferred SMTP service
# Option 1: Gmail SMTP (requires app password)
# SMTP_HOST="smtp.gmail.com"
# SMTP_PORT="587"
# SMTP_SECURE="false"
# SMTP_USER="your-gmail@gmail.com"
# SMTP_PASS="your-gmail-app-password"

# Option 2: AWS WorkMail SMTP (uncomment if using)
SMTP_HOST="smtp.mail.us-west-2.awsapps.com"
SMTP_PORT="465"
SMTP_SECURE="true"
SMTP_USER="noreply@your-domain.com"
SMTP_PASS="your-smtp-password"

# Email Templates
SMTP_FROM_NAME="Hardy Auth Service"
SMTP_FROM_EMAIL="noreply@your-domain.com"

# =============================================================================
# OPTIONAL SERVICES
# =============================================================================

# SMS/Twilio Configuration (for SMS 2FA)
TWILIO_ACCOUNT_SID="your-twilio-account-sid"
TWILIO_AUTH_TOKEN="your-twilio-auth-token"
TWILIO_PHONE_NUMBER="+1234567890"

# Redis Configuration (for session storage)
REDIS_URL="redis://default:auth_redis_password@localhost:6381"

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Encryption Keys
ENCRYPTION_KEY="your-32-character-encryption-key-change-in-production"

# Session Configuration
SESSION_TIMEOUT_MINUTES="30"
SESSION_WARNING_MINUTES="5"
SESSION_MAX_AGE="1800"  # 30 minutes in seconds
SESSION_UPDATE_AGE="300"  # 5 minutes in seconds

# Rate Limiting
RATE_LIMIT_WINDOW_MS="900000"  # 15 minutes
RATE_LIMIT_MAX_REQUESTS="100"

# Account Security
MAX_LOGIN_ATTEMPTS="5"
LOCKOUT_DURATION_MINUTES="15"
PASSWORD_MIN_LENGTH="12"

# =============================================================================
# HIPAA COMPLIANCE CONFIGURATION
# =============================================================================

# Audit Logging
AUDIT_LOG_RETENTION_DAYS="2557"  # 7 years for HIPAA compliance
ENABLE_AUDIT_LOGGING="true"

# Data Encryption
ENABLE_FIELD_ENCRYPTION="true"
KEY_ROTATION_DAYS="90"

# =============================================================================
# OAUTH2 CONFIGURATION
# =============================================================================

# OAuth2 Client Configuration
OAUTH2_ISSUER="http://localhost:3001"
OAUTH2_DEFAULT_SCOPE="openid profile email"

# Token Configuration
ACCESS_TOKEN_EXPIRY_MINUTES="60"
REFRESH_TOKEN_EXPIRY_DAYS="30"
ID_TOKEN_EXPIRY_MINUTES="60"

# =============================================================================
# ADMIN DASHBOARD CONFIGURATION
# =============================================================================

# Admin Interface
ADMIN_EMAIL="admin@your-domain.com"
ENABLE_ADMIN_REGISTRATION="false"

# Dashboard Features
ENABLE_USER_MANAGEMENT="true"
ENABLE_AUDIT_DASHBOARD="true"
ENABLE_ANALYTICS_DASHBOARD="true"

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================

# Application Monitoring
ENABLE_HEALTH_CHECKS="true"
HEALTH_CHECK_PATH="/api/health"

# Logging Configuration
LOG_LEVEL="info"
ENABLE_STRUCTURED_LOGGING="true"

# Metrics Collection
ENABLE_METRICS="true"
METRICS_PATH="/api/metrics"

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================

# Development Features
ENABLE_DEBUG_ROUTES="true"
ENABLE_SWAGGER_DOCS="true"
ENABLE_PRISMA_STUDIO="true"

# Testing Configuration
TEST_DATABASE_URL="postgresql://auth_service:auth_password@localhost:5434/hardy_auth_test"

# =============================================================================
# TENANT CONFIGURATION
# =============================================================================

# Multi-tenancy Settings
ENABLE_MULTI_TENANCY="true"
DEFAULT_TENANT_ID="default"
TENANT_ISOLATION_STRATEGY="RLS"  # Row Level Security